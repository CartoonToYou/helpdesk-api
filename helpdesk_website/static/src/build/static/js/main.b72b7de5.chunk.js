(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/fix.e0a7a059.svg"},107:function(e,t,a){e.exports=a.p+"static/media/comment.45983ea2.svg"},108:function(e,t,a){e.exports=a.p+"static/media/broadcast.107eee32.svg"},109:function(e,t,a){e.exports=a.p+"static/media/icon-back-disabled.9997da2f.svg"},110:function(e,t,a){e.exports=a.p+"static/media/bin-white.89c3d5fa.svg"},111:function(e,t,a){e.exports=a.p+"static/media/finish-report-private.3e8479a0.svg"},112:function(e,t,a){e.exports=a.p+"static/media/finish-report-public.d5d15502.svg"},113:function(e,t,a){e.exports=a.p+"static/media/lock.3d773a0a.svg"},114:function(e,t,a){e.exports=a.p+"static/media/global.8f1b7136.svg"},115:function(e,t,a){e.exports=a.p+"static/media/chevron.96da6131.svg"},116:function(e,t,a){e.exports=a.p+"static/media/pencil.c6f2ff12.svg"},117:function(e,t,a){e.exports=a.p+"static/media/plus.14e74331.svg"},122:function(e,t,a){e.exports=a(197)},128:function(e,t,a){},18:function(e,t,a){e.exports=a.p+"static/media/icon-back.d68bf51d.svg"},197:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),o=a.n(c),l=a(28),i=a(34),s=(a(127),a(128),a(54)),u=a(6),m=a(7),p=a(10),h=a(8),d=a(11),f=a(35),g=a.n(f),b=(a(88),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={previousRoutes:[]},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){g.a.start()}},{key:"componentDidMount",value:function(){g.a.done()}},{key:"render",value:function(){var e=this.props,t=e.component,a=e.layout,n=Object(s.a)(e,["component","layout"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return r.a.createElement(a,null,r.a.createElement(t,e))}}))}}]),t}(n.Component)),E=a(53),v=r.a.createContext(),y=function(e){return Math.floor(Math.random()*Math.floor(e))},O=function(e){localStorage.setItem("routes",JSON.stringify(e))},j=function(){return JSON.parse(localStorage.getItem("routes"))||[]},S=function(e,t){return e.id<t.id?-1:e.id>t.id?1:0},N=function(e,t){return e.start_date<t.start_date?-1:e.start_date>t.start_date?1:0},k=function(e,t){return e.start_date<t.start_date?1:e.start_date>t.start_date?-1:0},D=function(){var e=localStorage.getItem("profile");return e?JSON.parse(e):null},w=function(){var e=localStorage.getItem("token");return e?JSON.parse(e):null},C=function(){localStorage.clear()},x=function(){var e=localStorage.getItem("isAdmin");return e||null},_=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={previousRoutes:[],name:"",phone_number:"",room_number:""},a.checkExpirationTokenDate=function(){var e=a.props.history,t=JSON.parse(localStorage.getItem("expiration_date"));new Date(t)<new Date&&(C(),e.replace("/login"))},a.trackRoute=function(e){var t=a.state.previousRoutes;if(t.find(function(t){return t===e.location.pathname})){var n=t.slice(0,-1);a.setState({previousRoutes:n},function(){O(a.state.previousRoutes)})}else a.setState(function(e){return{previousRoutes:[].concat(Object(E.a)(e.previousRoutes),[a.props.location.pathname])}},function(){O(a.state.previousRoutes)})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){g.a.start()}},{key:"UNSAFE_componentWillUpdate",value:function(){g.a.start()}},{key:"componentDidMount",value:function(){if(D()){var e=D(),t=e.name,a=void 0===t?{}:t,n=e.phone_number,r=void 0===n?{}:n,c=e.room_number,o=void 0===c?{}:c;this.setState({previousRoutes:j(),name:a,phone_number:r,room_number:o})}g.a.done()}},{key:"componentDidUpdate",value:function(){g.a.done()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,a=this.state.previousRoutes;"/finish-report-private-zone"!==e.location.pathname&&"/finish-report-public-zone"!==e.location.pathname&&"/track-report"!==e.location.pathname?0===a.length&&j().length>0?this.setState({previousRoutes:j()},function(){return t.trackRoute(e)}):this.trackRoute(e):this.setState({previousRoutes:["/"]},function(){return O(["/"])})}},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=t.layout,c=Object(s.a)(t,["component","layout"]);return r.a.createElement(v.Provider,{value:this.state},r.a.createElement(i.b,Object.assign({},c,{render:function(t){return w()?r.a.createElement(n,null,e.checkExpirationTokenDate(),r.a.createElement(a,t)):r.a.createElement(i.a,{to:"/login"})}})))}}]),t}(n.Component),P=Object(i.g)(_),T=a(202);var M=function(e){var t=e.children;return r.a.createElement(T.a,{className:"containerMobile"},t)},F=a(32),Y=a.n(F),A=a(41),I=a(16),R=a(100),B=a.n(R);function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var J="/api/helpdesk/tickets",L="/api/helpdesk/ticket",q="/api/helpdesk/areas",z="/api/helpdesk/categories",H="/api/helpdesk/stages",W="/api/helpdesk/stage",V="/api/helpdesk/schedules",K="/api/helpdesk/schedule";function Q(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}var X=function(e,t){var a={Accept:"application/json"},n=w();return n&&(a.Authorization=n,function(){var e=D().role_group.find(function(e){return"Helpdesk Manager"===e.name});e&&localStorage.setItem("isAdmin",!0)}(),"GET"!==t.method.toUpperCase()&&(a["Content-Type"]="application/json")),B()(e,U({headers:a},t)).then(Q).then(function(){var e=Object(A.a)(Y.a.mark(function e(t){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=U,e.t1={status:t.status},e.next=4,t.json();case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},Z=a(42),$=a(203),ee=a(101),te=a(43),ae=a(18),ne=a.n(ae),re=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleChangeRoute=function(){var e=a.context.previousRoutes,t=e[e.length-1];t&&a.props.history.push(t)},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.header,a=e.handleSubmit,n=e.location,c=e.match,o=n.pathname,i=c.path;return r.a.createElement(T.a,{className:"containerMobile mt-4"},r.a.createElement($.a,null,"/"!==o?r.a.createElement(ee.a,null,r.a.createElement("span",{className:"buttonBack",onClick:this.handleChangeRoute},r.a.createElement("img",{src:ne.a,alt:"icon_back",style:{transform:"rotate(180deg)"}}))):r.a.createElement(ee.a,{className:"text-right"},r.a.createElement(l.b,{style:{color:"#E64343",fontSize:"14px",fontWeight:"bold"},to:"#"},"EN"))),r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement("div",{className:"titleMain"},t)),i.includes(":category")&&!i.includes("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19")?r.a.createElement("div",{className:"text-right medText green mt-3 mr-3",onClick:a},"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"):null))}}]),t}(n.Component);re.contextType=v;var ce=Object(i.g)(re);function oe(){var e=Object(Z.a)(["\n  margin-top: 0;\n"]);return oe=function(){return e},e}var le=te.a.hr(oe()),ie=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.header,a=e.handleSubmit,n=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null,r.a.createElement(ee.a,null)),r.a.createElement(ce,{handleSubmit:a,header:t}),r.a.createElement(le,null),r.a.createElement(T.a,{className:"containerMobile"},r.a.createElement($.a,null,r.a.createElement(ee.a,null,n))))}}]),t}(n.Component),se=a(209),ue=a(207),me=a(204),pe=function(e){return r.a.createElement(ue.a,{show:e.confirm,onHide:e.handleShowConfirm,size:"sm",centered:!0},r.a.createElement(ue.a.Body,null,r.a.createElement($.a,{className:"pb-4"},r.a.createElement(ee.a,{xs:4},r.a.createElement("strong",{style:{textDecoration:"underline"}},"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19"))),r.a.createElement($.a,{className:"pb-4"},r.a.createElement(ee.a,null,r.a.createElement("div",{className:"font-weight-bold h5"},e.ticketName),r.a.createElement("div",null,"\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e40\u0e1b\u0e47\u0e19"," ",r.a.createElement("strong",{className:e.buttonName},e.buttonName)," ","\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48 ?"))),r.a.createElement($.a,null,r.a.createElement(ee.a,null),r.a.createElement(ee.a,{xs:"auto"},r.a.createElement("span",{className:"pr-2"},r.a.createElement(me.a,{variant:"outline-dark",onClick:e.handleShowConfirm},"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01")),r.a.createElement(me.a,{variant:"primary",onClick:function(){return e.handleChangeStage(e.ticketID)}},"\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19")))))},he=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,{body:!0,className:"btnMenu",onClick:e.handleClick},r.a.createElement($.a,{style:{alignItems:"center"}},r.a.createElement(ee.a,{xs:"auto"},e.iconFront||e.iconNameFront?r.a.createElement("img",{src:e.iconFront?"".concat("http://erpdev.winservecorp.co.th:8069/web/content/").concat(e.iconFront,"?dummy=").concat(y(9999999)):e.iconNameFront,alt:"icon",className:"img-fluid"}):null),r.a.createElement(ee.a,{className:e.activeStage&&"text-center ".concat(e.buttonName),style:{padding:"0px"}},e.buttonName),r.a.createElement(ee.a,{xs:"auto"},e.iconNameBack?r.a.createElement("img",{src:e.iconNameBack,alt:"icon_name",className:"img-fluid"}):e.notifyReportCount?r.a.createElement("div",{className:e.notifyReportCount<10?"circle":e.notifyReportCount<100?"circle2Digits":"circle3Digits"},r.a.createElement("span",{className:"smallText md red"},e.notifyReportCount)):null))),r.a.createElement(pe,e))},de=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleRoute=function(){var e=a.props,t=e.path,n=e.state,r=e.history,c={};t&&(c.pathname=t,n&&(c.state=n)),r.push(c)},a.handleChangeStage=function(e){var t=a.props,n=t.activeStage,r=t.handleShowConfirm,c=t.getData;X("".concat(W,"/").concat(e),{method:"PUT",body:JSON.stringify({params:{stage_id:n.stage_id+1}})}).then(function(e){console.log(e),r(),c()}).catch(function(e){console.log(e)})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.handleRoute,t=this.handleChangeStage,a=this.props,n=a.activeStage,c=a.buttonName,o=a.handleShowConfirm;return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(he,Object.assign({handleClick:n?o:e,handleChangeStage:t},this.props)):null)}}]),t}(n.Component),fe=Object(i.g)(de),ge=function(){var e=Object(n.useContext)(v);return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{className:"profileWrapper"},r.a.createElement(ee.a,null,r.a.createElement("div",null,e.name,r.a.createElement("br",null),e.phone_number),r.a.createElement("div",{className:"roomNumber"},e.room_number))),r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement("hr",null))))},be=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(ge,null)}}]),t}(n.Component),Ee=a(106),ve=a.n(Ee),ye=a(107),Oe=a.n(ye),je=a(108),Se=a.n(je),Ne=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,reportCount:null},a.getData=function(){var e=a.props.history;if(D()){var t=D().name,n=void 0===t?{}:t;a.setState({name:n}),X(J,{method:"GET"}).then(function(t){if(t.status<401)if(x())a.setState({reportCount:t.count});else{var r=t.rows.filter(function(e){return e.partner.name===n});a.setState({reportCount:r.length})}else C(),e.replace("/login")})}},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.reportCount;return r.a.createElement(ie,{header:"\u0e2b\u0e19\u0e49\u0e32\u0e41\u0e23\u0e01"},r.a.createElement(be,null),r.a.createElement(fe,{path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19",buttonName:"\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32",iconNameFront:ve.a,iconNameBack:ne.a}),r.a.createElement(fe,{path:"/track-report",buttonName:"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21\u0e1c\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07",iconNameFront:Oe.a,iconNameBack:!e&&ne.a,notifyReportCount:e}),r.a.createElement(fe,{path:"/maintenance-schedule",buttonName:"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e0b\u0e48\u0e2d\u0e21\u0e1a\u0e33\u0e23\u0e38\u0e07",iconNameFront:Se.a,iconNameBack:ne.a}))}}]),t}(n.Component);Ne.contextType=v;var ke=Ne,De=function(){var e=Object(A.a)(Y.a.mark(function e(t,a){var n,r;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=25;break}return e.prev=1,"db",e.next=5,X("/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({params:{db:"db",username:t,password:a}})});case 5:return n=e.sent,e.next=8,c=n.result,o=n.result.access_token,localStorage.setItem("profile",JSON.stringify(c)),void localStorage.setItem("token",JSON.stringify(o));case 8:if(200!==n.status){e.next=16;break}return r=new Date,2,r.setHours(r.getHours()+2),localStorage.setItem("expiration_date",JSON.stringify(r)),e.abrupt("return",!0);case 16:return e.abrupt("return",!1);case 17:e.next=23;break;case 19:if(e.prev=19,e.t0=e.catch(1),!e.t0){e.next=23;break}return e.abrupt("return",!1);case 23:e.next=26;break;case 25:console.log("No response");case 26:case"end":return e.stop()}var c,o},e,null,[[1,19]])}));return function(t,a){return e.apply(this,arguments)}}(),we=a(208),Ce=a(206);function xe(){var e=Object(Z.a)(["\n  margin-top: 0;\n"]);return xe=function(){return e},e}var _e=te.a.hr(xe()),Pe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",requiredUsername:!1,requiredPassword:!1,alertStatus:!0},a.handleInputChanged=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(I.a)({},n,r))},a.handleLogin=function(){var e=Object(A.a)(Y.a.mark(function e(t){var n,r,c,o,l;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.username,c=n.password,o=a.props.history,r||c?r?c||a.setState({requiredUsername:!1,requiredPassword:!0}):a.setState({requiredUsername:!0,requiredPassword:!1}):a.setState({requiredUsername:!0,requiredPassword:!0}),e.next=6,De(r,c);case 6:(l=e.sent)?o.push("/"):a.setState({alertStatus:l});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password,c=t.requiredUsername,o=t.requiredPassword,l=t.alertStatus,i=this.handleInputChanged,s=this.handleLogin;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{className:"mt-5"},r.a.createElement(ee.a,null,r.a.createElement("h1",{style:{textAlign:"center"}},"Smart Service"),r.a.createElement(_e,null))),r.a.createElement($.a,null,r.a.createElement(ee.a,null,!l&&r.a.createElement(we.a,{className:"mt-4",variant:"danger",onClose:function(){return e.setState({alertStatus:!0})},dismissible:!0},"authentication failed"),r.a.createElement(Ce.a,{onSubmit:s},r.a.createElement(Ce.a.Group,{controlId:"formBasicEmail"},r.a.createElement(Ce.a.Label,null,"Username"),r.a.createElement(Ce.a.Control,{name:"username",onChange:i,value:a,type:"text",className:c?"is-invalid":""}),r.a.createElement(Ce.a.Control.Feedback,{type:"invalid"},"Username is Required!")),r.a.createElement(Ce.a.Group,{controlId:"formBasicPassword"},r.a.createElement(Ce.a.Label,null,"Password"),r.a.createElement(Ce.a.Control,{name:"password",onChange:i,value:n,type:"password",className:o?"is-invalid":""}),r.a.createElement(Ce.a.Control.Feedback,{type:"invalid"},"Password is Required!")),r.a.createElement(me.a,{variant:"success",type:"submit",block:!0},"Enter")))))}}]),t}(n.Component),Te=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={allAreas:""},a.getArea=function(){var e=a.props.history;X(q,{method:"GET"}).then(function(t){t.status<400?a.setState({allAreas:t.rows}):(C(),e.replace("/login"))})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getArea()}},{key:"render",value:function(){var e=this.state.allAreas,t=this.props.location.pathname;return r.a.createElement(ie,{header:"\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32"},r.a.createElement("div",{className:"titleSub mb-2"},"\u0e1a\u0e23\u0e34\u0e40\u0e27\u0e13\u0e02\u0e2d\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32"),e.length>0&&r.a.createElement(r.a.Fragment,null,e.map(function(e){return r.a.createElement(fe,{key:e.id,path:"".concat(t,"/").concat(e.name),buttonName:e.name,iconFront:e.attachments.id,iconNameBack:ne.a})})))}}]),t}(n.Component),Me=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={privateArea:"",allCategories:[]},a.getData=function(){var e=a.props.history;X(q,{method:"GET"}).then(function(t){if(t.status<400){var n=t.rows.find(function(e){return"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"===e.name}),r=n.categories.sort(S);n&&r&&a.setState({privateArea:n,allCategories:r})}else C(),e.replace("/login")})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.allCategories,t=this.props.location.pathname;return r.a.createElement(ie,{header:"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"},r.a.createElement("div",{className:"titleSub mb-2"},"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e02\u0e2d\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32"),e.map(function(e){return r.a.createElement(fe,{key:e.id,path:"".concat(t,"/").concat(e.name),buttonName:e.name,iconFront:e.attachments.id,iconNameBack:ne.a})}))}}]),t}(n.Component),Fe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={publicArea:"",allCategories:[]},a.getData=function(){var e=a.props.history;X(q,{method:"GET"}).then(function(t){if(t.status<400){var n=t.rows.find(function(e){return"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07"===e.name}),r=n.categories.sort(S);n&&r&&a.setState({publicArea:n,allCategories:r})}else C(),e.replace("/login")})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.allCategories,t=this.props.location.pathname;return r.a.createElement(ie,{header:t.includes("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19")?"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07":"\u0e2a\u0e23\u0e49\u0e32\u0e07"},r.a.createElement("div",{className:"titleSub mb-2"},t.includes("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19")?"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e02\u0e2d\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32":"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e02\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e0b\u0e48\u0e2d\u0e21\u0e1a\u0e33\u0e23\u0e38\u0e07"),e.map(function(e){return r.a.createElement(fe,{key:e.name,path:"".concat(t,"/").concat(e.name),buttonName:e.name,iconFront:e.attachments.id,iconNameBack:ne.a,state:t.includes("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19")&&{title:"\u0e2a\u0e23\u0e49\u0e32\u0e07"}})}))}}]),t}(n.Component),Ye=a(205),Ae=a(68),Ie=a.n(Ae),Re=(a(153),a(109)),Be=a.n(Re),Ge=function(e){var t=e.handleSubmit,a=e.disabled,n=void 0!==a&&a;return r.a.createElement(se.a,{body:!0,className:"btnMenu ".concat(n&&"disabled"),onClick:t},r.a.createElement($.a,null,r.a.createElement(ee.a,{className:"text-center"},"\u0e2a\u0e48\u0e07\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07"),r.a.createElement("div",{className:"iconBackAbs"},r.a.createElement("img",{src:n?Be.a:ne.a,alt:"icon_name",className:"img-fluid"}))))},Ue=a(110),Je=a.n(Ue);function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var qe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={showCamera:!1,area:"",category:"",title:{status:!1,detail:""},desc:{status:!1,detail:""},tempPhotos:[]},a.fileInput=null,a.getData=function(){var e=a.props.history,t=a.props.match.params,n=t.area,r=t.category;X(q,{method:"GET"}).then(function(t){t.status<400?a.setState({area:t.rows.find(function(e){return e.name===n})},function(){a.setState({category:a.state.area.categories.find(function(e){return e.name===r})})}):(C(),e.replace("/login"))})},a.handleSubmit=function(){var e=a.state,t=e.area,n=e.category,r=e.title,c=e.desc,o=e.tempPhotos,l=a.props,i=l.history,s=l.header;r.detail&&c.detail&&o.length>0&&X(L,{method:"POST",body:JSON.stringify({params:{name:r.detail,description:c.detail,team_id:t.id,category_id:n.id,attachments:o}})}).then(function(e){200===e.status&&("\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07"===s?i.push("/finish-report-public-zone"):i.push("/finish-report-private-zone"))})},a.getBase64image=function(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})},a.handleChange=function(e){var t=a.state.tempPhotos,n=e.target,r=n.value,c=n.name,o=n.files;"upload"===c?a.getBase64image(o[0]).then(function(e){t[0]?a.setState(function(t){return{tempPhotos:[].concat(Object(E.a)(t.tempPhotos),[{data:e}])}},function(){return a.fileInput.value=""}):a.setState({tempPhotos:[{data:e}]},function(){return a.fileInput.value=""})}):a.setState(Object(I.a)({},c,{detail:r}))},a.handleToggleCamera=function(){a.setState(function(e){return{showCamera:!e.showCamera}})},a.handleFocus=function(e){var t=e.target.name;a.setState(function(e){return Object(I.a)({},t,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(a,!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e[t],{status:!e[t].status}))})},a.onTakePhoto=function(e){a.state.tempPhotos[0]?a.setState(function(t){return{tempPhotos:[].concat(Object(E.a)(t.tempPhotos),[{data:e}])}}):a.setState({tempPhotos:[{data:e}]})},a.deleteTempPhoto=function(e){a.setState(function(t){return{tempPhotos:t.tempPhotos.filter(function(t,a){return a!==e})}})},a.handleClickInputFile=function(){return a.fileInput.click()},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"onCameraError",value:function(e){console.error("onCameraError",e)}},{key:"onCameraStart",value:function(){console.log("onCameraStart")}},{key:"onCameraStop",value:function(){console.log("onCameraStop")}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.desc,c=t.showCamera,o=t.tempPhotos,l=!0;return a.detail&&n.detail&&o.length>0&&(l=!1),r.a.createElement(Ce.a,{className:"myForm"},r.a.createElement(Ce.a.Group,null,r.a.createElement(Ce.a.Label,{className:a.status?"active":""},"\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07 :"),r.a.createElement(Ce.a.Control,{name:"title",type:"text",onFocus:this.handleFocus,onBlur:this.handleFocus,onChange:this.handleChange})),r.a.createElement(Ce.a.Group,null,r.a.createElement(Ce.a.Label,{className:n.status?"active":""},"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 :"),r.a.createElement(Ce.a.Control,{name:"desc",as:"textarea",onFocus:this.handleFocus,onBlur:this.handleFocus,onChange:this.handleChange})),r.a.createElement(Ce.a.Group,{className:"mb-0"},r.a.createElement(Ce.a.Label,{className:"mb-2"},"\u0e23\u0e39\u0e1b\u0e1b\u0e23\u0e30\u0e01\u0e2d\u0e1a :"),r.a.createElement($.a,{style:{margin:"0 -.25rem"},noGutters:!0},o.length>0&&o.map(function(t,a){return r.a.createElement(ee.a,{xs:"3",className:"mb-2 px-1",key:a},r.a.createElement("div",{onClick:function(){return e.deleteTempPhoto(a)},className:"boxIconAbs"},r.a.createElement(Ye.a,{src:Je.a,alt:"icon_bin",className:"iconAbs"}),r.a.createElement(Ye.a,{src:t.data,className:"img-fluid "})))})),c&&r.a.createElement(Ie.a,{onTakePhoto:function(t){e.onTakePhoto(t)},onCameraError:function(t){e.onCameraError(t)},idealFacingMode:Ae.FACING_MODES.ENVIRONMENT,imageType:Ae.IMAGE_TYPES.JPG,imageCompression:.97,isMaxResolution:!1,isImageMirror:!1,isSilentMode:!0,isDisplayStartCameraError:!0,sizeFactor:1,onCameraStart:function(){e.onCameraStart()},onCameraStop:function(){e.onCameraStop()}}),r.a.createElement($.a,{className:"mt-2"},r.a.createElement(ee.a,{className:"pr-1"},r.a.createElement(me.a,{block:!0,variant:"outline-secondary",className:"btnTheme",onClick:this.handleToggleCamera},c?"\u0e1b\u0e34\u0e14\u0e01\u0e25\u0e49\u0e2d\u0e07":"\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b")),r.a.createElement(ee.a,{className:"pl-1"},r.a.createElement(me.a,{onClick:this.handleClickInputFile,block:!0,variant:"outline-secondary",className:"btnTheme"},"\u0e2d\u0e31\u0e1e\u0e42\u0e2b\u0e25\u0e14\u0e23\u0e39\u0e1b"),r.a.createElement("input",{name:"upload",style:{display:"none"},onChange:this.handleChange,ref:function(t){return e.fileInput=t},type:"file"}))),r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement("hr",null)))),r.a.createElement(Ge,{disabled:l,handleSubmit:this.handleSubmit}))}}]),t}(n.Component),ze=Object(i.g)(qe),He=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={area:"",category:""},a.getData=function(){var e=a.props.history,t=a.props.match.params,n=t.area,r=t.category;X(q,{method:"GET"}).then(function(t){t.status<400?a.setState({area:t.rows.find(function(e){return e.name===n})},function(){a.setState({category:a.state.area.categories.find(function(e){return e.name===r})})}):(C(),e.replace("/login"))})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state,t=e.area,a=e.category;return r.a.createElement(ie,{header:t.name},r.a.createElement(fe,{buttonName:a.name,iconFront:a.attachments&&a.attachments.id}),r.a.createElement(ze,null))}}]),t}(n.Component),We=function(e){var t=e.iconName,a=e.history,n=e.pathForward;return r.a.createElement(ie,{header:"\u0e2a\u0e48\u0e07\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"},r.a.createElement(se.a,{className:"boxFinishReport text-center",style:{top:"30%"}},r.a.createElement(se.a.Body,null,r.a.createElement("img",{src:t,alt:"icon_callcenter"}),r.a.createElement("div",{className:"mainTitle"},"\u0e40\u0e23\u0e32\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13",r.a.createElement("br",null),"\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e41\u0e25\u0e49\u0e27"),r.a.createElement("div",{className:"subTitle"},"\u0e40\u0e23\u0e32\u0e08\u0e30\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23",r.a.createElement("br",null),"\u0e43\u0e2b\u0e49\u0e40\u0e23\u0e47\u0e27\u0e17\u0e35\u0e48\u0e2a\u0e38\u0e14\u0e40\u0e17\u0e48\u0e32\u0e17\u0e35\u0e48\u0e08\u0e30\u0e40\u0e1b\u0e47\u0e19\u0e44\u0e1b\u0e44\u0e14\u0e49")),r.a.createElement(se.a.Footer,null,r.a.createElement("div",{onClick:function(){return a.push(n)}},r.a.createElement("div",{className:"title"},"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21\u0e1c\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07"),r.a.createElement("div",{className:"imgAbs"},r.a.createElement("img",{src:ne.a,alt:"icon_back"}))))))},Ve=a(111),Ke=a.n(Ve),Qe=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement(We,{iconName:Ke.a,pathForward:"track-report",history:e})}}]),t}(n.Component),Xe=a(112),Ze=a.n(Xe),$e=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement(We,{iconName:Ze.a,pathForward:"track-report",history:e})}}]),t}(n.Component),et=a(48),tt=a(19),at=a.n(tt);function nt(){var e=Object(Z.a)(["\n  margin: 0;\n"]);return nt=function(){return e},e}var rt=te.a.hr(nt()),ct=function(e){var t=e.ticket,a=e.allStages,c=e.getData,o=Object(n.useState)(!1),l=Object(et.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(t),m=Object(et.a)(u,2),p=m[0],h=m[1];Object(n.useEffect)(function(){h(t)},[t]);var d=p.stages.find(function(e){return e.stage_name===p.stage_name}),f=a.find(function(e){return e.id===d.stage_id+1}),g=p.stages.sort(S),b=r.a.createElement(r.a.Fragment,null,r.a.createElement(rt,null),r.a.createElement(se.a.Body,null,r.a.createElement($.a,{noGutters:!0},r.a.createElement(ee.a,null,g.filter(function(e){return e.stage_id>=2}).map(function(e,t){return r.a.createElement("div",{key:t,className:"smallText ".concat(e.stage_name)},e.stage_name)})),r.a.createElement(ee.a,{className:"text-right"},r.a.createElement("div",{className:"smallText grey"},g.filter(function(e){return e.stage_id>=2}).map(function(e){return r.a.createElement("div",{key:e.id},at()(e.created).format("DD/MM/YYYY")," \u2022"," ",at()(e.created).add(7,"hours").format("hh:mm A"),r.a.createElement("br",null))})))))),E=r.a.createElement(r.a.Fragment,null,r.a.createElement(rt,null),r.a.createElement(se.a.Body,null,r.a.createElement($.a,{noGutters:!0,className:"\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19"!==d.stage_name&&"pb-2"},r.a.createElement(ee.a,null,g.filter(function(e){return e.stage_id>=2}).map(function(e,t){return r.a.createElement("div",{key:t,className:"smallText ".concat(e.stage_name)},e.stage_name)})),r.a.createElement(ee.a,{className:"text-right"},r.a.createElement("div",{className:"smallText grey"},g.filter(function(e){return e.stage_id>=2}).map(function(e){return r.a.createElement("div",{key:e.id},at()(e.created).format("DD/MM/YYYY")," \u2022"," ",at()(e.created).add(7,"hours").format("hh:mm A"),r.a.createElement("br",null))})))),r.a.createElement(fe,{ticketID:t.id,ticketName:t.name,buttonName:f&&f.name,activeStage:d,confirm:i,handleShowConfirm:function(){return s(!i)},getData:c})));return r.a.createElement(r.a.Fragment,null,4===d.stage_id&&at()(d.created).add(3,"days").format("DD/MM/YYYY")<at()(new Date).format("DD/MM/YYYY")?null:r.a.createElement(se.a,{className:"myCard"},r.a.createElement(se.a.Header,null,r.a.createElement($.a,{noGutters:!0},r.a.createElement(ee.a,{className:"pt-1",xs:"auto"},r.a.createElement("img",{src:"http://erpdev.winservecorp.co.th:8069/web/content/"+t.category.attachments.id+"?dummy="+y(9999999),alt:"icon"})),r.a.createElement(ee.a,{className:"px-2"},r.a.createElement("div",null,t.name),r.a.createElement("div",{className:"smallText grey"},at()(t.created).format("DD/MM/YYYY")," \u2022"," ",at()(t.created).add(7,"hours").format("hh:mm A"))),r.a.createElement(ee.a,{className:"text-right pt-2",xs:"auto"},x()?"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e2a\u0e48\u0e07"!==d.stage_name?r.a.createElement("span",{className:"smallText stage ".concat(d.stage_name)},d.stage_name):null:r.a.createElement("span",{className:"smallText stage ".concat(d.stage_name)},d.stage_name)))),r.a.createElement(se.a.Body,null,r.a.createElement($.a,{noGutters:!0},r.a.createElement(ee.a,null,r.a.createElement("div",{className:"smallText titleSub"},"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14"),r.a.createElement("div",{className:"smallText grey mb-3"},t.description),r.a.createElement("div",{className:"smallText titleSub"},"\u0e41\u0e08\u0e49\u0e07\u0e42\u0e14\u0e22"),r.a.createElement("div",{className:"smallText grey"},"\u0e2b\u0e49\u0e2d\u0e07 ",t.partner.room_number," \u2022 ",t.partner.name)),r.a.createElement(ee.a,{className:"px-3",xs:"auto"},t.attachments.length>0&&t.attachments.map(function(e,t){return r.a.createElement($.a,{key:t,className:"pb-2"},r.a.createElement("img",{width:"120px",src:"http://erpdev.winservecorp.co.th:8069/web/content/"+e.id+"?dummy="+y(9999999),alt:"img",className:"img-fluid"}))})))),x()?E:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e2a\u0e48\u0e07"!==d.stage_name&&b))},ot=a(113),lt=a.n(ot),it=a(114),st=a.n(it),ut=a(115),mt=a.n(ut),pt=function(e){var t=Object(n.useState)(e.isShowPrivate),a=Object(et.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(e.isShowPublic),i=Object(et.a)(l,2),s=i[0],u=i[1];return Object(n.useEffect)(function(){o(e.isShowPrivate)},[e.isShowPrivate]),Object(n.useEffect)(function(){u(e.isShowPublic)},[e.isShowPublic]),r.a.createElement($.a,{className:"mb-2"},r.a.createElement(ee.a,null,r.a.createElement("div",{className:"titleSub"},e.title)),r.a.createElement("div",null,s),r.a.createElement(ee.a,{className:"text-right"},r.a.createElement("div",{onClick:e.toggleReportList},e.haveData?r.a.createElement("img",{className:x()?"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"===e.title?c?"":"rotateTitleIcon":s?"":"rotateTitleIcon":"titleIcon",src:x()?mt.a:"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"===e.title?lt.a:st.a,alt:"icon_for_".concat(e.title)}):null)))},ht=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",publicTickets:[],privateTickets:[],isShowPrivate:!0,isShowPublic:!0,loading:!0},a.getData=function(){var e=a.props.history,t=D().name,n=void 0===t?{}:t;a.setState({name:n}),X(H,{method:"GET"}).then(function(t){t.status<400?a.setState({allStages:t.rows}):(C(),e.replace("/login"))}).catch(function(e){console.log(e)}),X(J,{method:"GET"}).then(function(t){if(t.status<400){var r=t.rows.filter(function(e){return"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"===e.area.name}),c=t.rows.filter(function(e){return"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07"===e.area.name});x()?a.setState({privateTickets:r,publicTickets:c,loading:!1}):(r=r.filter(function(e){return e.partner.name===n}),c=c.filter(function(e){return e.partner.name===n}),a.setState({privateTickets:r,publicTickets:c,loading:!1}))}else C(),e.replace("/login")}).catch(function(e){console.log(e)})},a.toggleReportList=function(e){return function(){a.setState(function(t){return Object(I.a)({},e,!t[e])})}},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.getData,t=this.state,a=t.allStages,n=t.privateTickets,c=t.publicTickets,o=t.isShowPrivate,l=t.isShowPublic,i=t.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{header:"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21\u0e1c\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07"},r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement(pt,{title:"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27",toggleReportList:x()?this.toggleReportList("isShowPrivate"):null,haveData:n.length,isShowPrivate:o}),o?n.length>0&&!i?r.a.createElement($.a,null,r.a.createElement(ee.a,null,n.map(function(t,n){return r.a.createElement("div",{key:t.id,className:t.length-1===n?null:"mb-3"},r.a.createElement(ct,{ticket:t,allStages:a,getData:e}))}),r.a.createElement("hr",null))):i?r.a.createElement("hr",null):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"pl-3"},"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"),r.a.createElement("hr",null)):r.a.createElement("hr",null))),r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement(pt,{title:"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07",toggleReportList:x()?this.toggleReportList("isShowPublic"):null,haveData:c.length,isShowPublic:l}),l?c.length>0&&!i?r.a.createElement($.a,null,r.a.createElement(ee.a,null,c.map(function(t){return r.a.createElement("div",{key:t.id,className:"mb-3"},r.a.createElement(ct,{ticket:t,allStages:a,getData:e}))}))):i?r.a.createElement("hr",null):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"pl-3"},"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"),r.a.createElement("hr",null)):r.a.createElement("hr",null)))))}}]),t}(n.Component);ht.contextType=v;var dt=ht,ft=a(116),gt=a.n(ft),bt=Object(i.g)(function(e){var t=e.sortData.find(function(e){return at()(e.end_date).format("DD/MM/YYYY")<at()(new Date).format("DD/MM/YYYY")}),a=e.sortData.sort(N).find(function(e){return at()(e.end_date).format("DD/MM/YYYY")>=at()(new Date).format("DD/MM/YYYY")}),n="http://erpdev.winservecorp.co.th:8069/web/content/",c=a?a.category.attachments.id:t.category.attachments.id;return r.a.createElement(se.a,{className:"myCard mb-2"},a?r.a.createElement(se.a.Header,null,r.a.createElement($.a,{noGutters:!0},r.a.createElement(ee.a,{className:"mr-3",xs:1},r.a.createElement("img",{src:"".concat(n).concat(c,"?dummy=").concat(y(9999999)),alt:"icon"})),r.a.createElement(ee.a,{className:"smallText md",xs:9},r.a.createElement("div",null,a.name),r.a.createElement("div",{className:"smallText grey"},at()(a.start_date).format("DD/MM/YYYY"),a.end_date&&" -".concat(" ","\n                  ",at()(a.end_date).format("DD/MM/YYYY")))),r.a.createElement(ee.a,{className:"pb-3",xs:1},x()&&r.a.createElement("img",{onClick:function(){return function(t){var a=e.history,n=e.location,r="".concat(n.pathname,"/edit/").concat(e.category,"/").concat(t.id);a.push(r)}(a)},src:gt.a,alt:"edit_icon"})))):null,t?r.a.createElement(se.a.Body,null,r.a.createElement($.a,null,!a&&r.a.createElement(ee.a,{className:"mr-3",xs:1},r.a.createElement("img",{src:"".concat(n).concat(c,"?dummy=").concat(y(9999999)),alt:"icon"})),r.a.createElement(ee.a,null,r.a.createElement("div",{className:"smallText purple mb-1"},"\u0e17\u0e35\u0e48\u0e1c\u0e48\u0e32\u0e19\u0e21\u0e32 \u2022"," ",t.end_date?at()(t.end_date).format("DD/MM/YYYY"):at()(t.start_date).format("DD/MM/YYYY")),r.a.createElement("div",{className:"smallText grey"},t.name)))):null)}),Et=a(117),vt=a.n(Et),yt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={sortedCategorySchedule:[],maintenanceSchedule:[]},a.getData=function(){var e=a.props.history;X(V,{method:"GET"}).then(function(t){t.status<400?(a.setState({maintenanceSchedule:t.rows}),X(z,{method:"GET"}).then(function(e){var t=e.rows.map(function(e){return e.id});a.sortedDataByCategories(t)})):(C(),e.replace("/login"))})},a.sortedDataByCategories=function(e){var t=a.state.maintenanceSchedule,n=[];e.forEach(function(e){var a=t.sort(k).filter(function(t){return t.category.id===e});if(a.length>0){var r=a[0].category.id,c=a[0].category.name;n.push({id:r,category_name:c,all_schedules:a})}}),a.setState({sortedCategorySchedule:n})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.sortedCategorySchedule,t=this.props.location.pathname;return r.a.createElement(ie,{header:"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e0b\u0e48\u0e2d\u0e21\u0e1a\u0e33\u0e23\u0e38\u0e07"},r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement("div",{className:"titleSub mb-2"},"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07"),r.a.createElement($.a,null,r.a.createElement(ee.a,null,e.map(function(e){return r.a.createElement(bt,{key:e.id,category:e.category_name,sortData:e.all_schedules})}))))),x()&&r.a.createElement(fe,{iconNameFront:vt.a,iconNameBack:ne.a,buttonName:"\u0e2a\u0e23\u0e49\u0e32\u0e07",path:"".concat(t,"/\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07")}))}}]),t}(n.Component),Ot=a(85),jt=a.n(Ot),St=function(e){var t=e.buttonName,a=e.iconFrontId;return r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement(se.a,{body:!0,style:{borderRadius:"4px"},className:"btnMenu"},r.a.createElement($.a,{style:{alignItems:"center"}},r.a.createElement(ee.a,{xs:"auto"},r.a.createElement("img",{style:{opacity:"0.3"},src:a&&"http://erpdev.winservecorp.co.th:8069/web/content/"+a+"?dummy="+y(9999999),alt:"icon_name",className:"img-fluid"})),r.a.createElement(ee.a,{className:"medText grey",style:{padding:"0px"}},t)))))};function Nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var kt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={name:{status:!1,detail:""},startDate:null,endDate:null},a.handleFocus=function(e){var t=e.target.name;a.setState(function(e){return Object(I.a)({},t,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Nt(a,!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e[t],{status:!e[t].status}))})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.name.detail===this.props.name.detail&&e.startDate===this.props.startDate&&e.endDate===this.props.endDate||this.setState({name:{detail:this.props.name.detail},startDate:this.props.startDate,endDate:this.props.endDate})}},{key:"render",value:function(){var e=this.props,t=e.buttonName,a=e.iconFrontId,n=e.handleChangeDate,c=e.handleChangeInput,o=this.state,l=o.name,i=o.startDate,s=o.endDate,u=this.handleFocus;return r.a.createElement(r.a.Fragment,null,r.a.createElement(St,{buttonName:t,iconFrontId:a}),r.a.createElement(Ce.a,{className:"myForm"},r.a.createElement(Ce.a.Group,null,r.a.createElement("label",{className:"medText purple"},"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48 : "),r.a.createElement($.a,{style:{paddingBottom:"40px"}},r.a.createElement(ee.a,{xs:"5"},r.a.createElement(jt.a,{selected:i,onChange:n("startDate"),startDate:i,endDate:s,dateFormat:"dd/MM/yyyy",placeholderText:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e27\u0e31\u0e19",dropdownMode:"select",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,selectsStart:!0,isClearable:!0,withPortal:!0})),r.a.createElement(ee.a,{xs:"1"},"\u21d2"),r.a.createElement(ee.a,{xs:"5"},r.a.createElement(jt.a,{selected:s,onChange:n("endDate"),endDate:s,minDate:i,dateFormat:"dd/MM/yyyy",placeholderText:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e27\u0e31\u0e19",dropdownMode:"select",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,selectsEnd:!0,isClearable:!0,withPortal:!0}))),r.a.createElement($.a,null,r.a.createElement(ee.a,null,r.a.createElement(Ce.a.Label,{className:l.status?"active":""},"\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07 :"),r.a.createElement(Ce.a.Control,{name:"name",as:"textarea",value:l.detail,onFocus:u,onBlur:u,onChange:c}))))))}}]),t}(n.Component),Dt=Object(i.g)(kt),wt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={area:"",category:"",name:{status:!1,detail:""},startDate:null,endDate:null},a.getData=function(){var e=a.props,t=e.history,n=e.match.params,r=n.area,c=n.category;X(q,{method:"GET"}).then(function(e){e.status<400?a.setState({area:e.rows.find(function(e){return e.name===r})},function(){a.setState({category:a.state.area.categories.find(function(e){return e.name===c})})}):(C(),t.replace("/login"))})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.history,n=a.state,r=n.category,c=n.name,o=n.startDate,l=n.endDate;c.detail&&o&&X(K,{method:"POST",body:JSON.stringify({params:{name:c.detail,schedule_date:o,end_date:l,equipment_id:r.id}})}).then(function(e){console.log(e),t.push("/maintenance-schedule")}).catch(function(e){console.log(e)})},a.handleChangeDate=function(e){return function(t){a.setState(Object(I.a)({},e,t))}},a.handleChangeInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(I.a)({},n,{detail:r}))},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state,t=e.area,a=e.category;return r.a.createElement(ie,{handleSubmit:this.handleSubmit,header:t.name},r.a.createElement(Dt,Object.assign({},this.state,{handleChangeDate:this.handleChangeDate,handleChangeInput:this.handleChangeInput,buttonName:a.name,iconFrontId:a.attachments&&a.attachments.id})))}}]),t}(n.Component),Ct=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={title:"\u0e41\u0e01\u0e49\u0e44\u0e02\u0e15\u0e32\u0e23\u0e32\u0e07\u0e0b\u0e48\u0e2d\u0e21",name:{status:!1,detail:""},startDate:null,endDate:null,categoryName:"",categoryAttachId:""},a.getData=function(){var e=a.props.match.params.id,t=a.props.history;X("".concat(K,"/").concat(e),{method:"GET"}).then(function(e){e.status<400?a.setState({name:{detail:e.name},startDate:new Date(e.start_date),endDate:new Date(e.end_date),categoryName:e.category.name,categoryAttachId:e.category.attachments.id}):(C(),t.replace("/login"))}).catch(function(e){console.log(e)})},a.handleSubmit=function(){var e=a.props.match.params.id,t=a.props.history,n=a.state,r=n.name,c=n.startDate,o=n.endDate;X("".concat(K,"/").concat(e),{method:"PUT",body:JSON.stringify({params:{name:r.detail,schedule_date:c,end_date:o}})}).then(function(e){console.log(e),t.push("/maintenance-schedule")}).catch(function(e){console.log(e)})},a.handleChangeDate=function(e){return function(t){a.setState(Object(I.a)({},e,t))}},a.handleChangeInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(I.a)({},n,{detail:r}))},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.categoryName,n=e.categoryAttachId;return r.a.createElement(ie,Object.assign({},this,this.state,{header:t}),r.a.createElement(Dt,Object.assign({},this,this.state,{buttonName:a,iconFrontId:n})))}}]),t}(n.Component),xt=function(e){return r.a.createElement("div",null,e.children)},_t=function(){return r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(b,{exact:!0,path:"/login",layout:M,component:Pe}),r.a.createElement(P,{exact:!0,path:"/",layout:xt,component:ke}),r.a.createElement(P,{exact:!0,path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19",layout:xt,component:Te}),r.a.createElement(P,{exact:!0,path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19/\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27",layout:xt,component:Me}),r.a.createElement(P,{exact:!0,path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19/\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07",layout:xt,component:Fe}),r.a.createElement(P,{exact:!0,path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19/:area/:category",layout:xt,component:He}),r.a.createElement(P,{exact:!0,path:"/finish-report-private-zone",layout:xt,component:Qe}),r.a.createElement(P,{exact:!0,path:"/finish-report-public-zone",layout:xt,component:$e}),r.a.createElement(P,{exact:!0,path:"/track-report",layout:xt,component:dt}),r.a.createElement(P,{exact:!0,path:"/maintenance-schedule",layout:xt,component:yt}),r.a.createElement(P,{exact:!0,path:"/maintenance-schedule/:area",layout:xt,component:Fe}),r.a.createElement(P,{exact:!0,path:"/maintenance-schedule/:area/:category",layout:xt,component:wt}),r.a.createElement(P,{exact:!0,path:"/maintenance-schedule/edit/:category/:id",layout:xt,component:Ct}),r.a.createElement(P,{path:"*",layout:xt,component:ke})))};o.a.render(r.a.createElement(_t,null),document.getElementById("root"))}},[[122,1,2]]]);