(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/fix.e0a7a059.svg"},107:function(e,t,a){e.exports=a.p+"static/media/comment.45983ea2.svg"},108:function(e,t,a){e.exports=a.p+"static/media/broadcast.107eee32.svg"},109:function(e,t,a){e.exports=a.p+"static/media/icon-back-disabled.9997da2f.svg"},110:function(e,t,a){e.exports=a.p+"static/media/bin-white.89c3d5fa.svg"},111:function(e,t,a){e.exports=a.p+"static/media/finish-report-private.3e8479a0.svg"},112:function(e,t,a){e.exports=a.p+"static/media/finish-report-public.d5d15502.svg"},113:function(e,t,a){e.exports=a.p+"static/media/lock.3d773a0a.svg"},114:function(e,t,a){e.exports=a.p+"static/media/global.8f1b7136.svg"},115:function(e,t,a){e.exports=a.p+"static/media/chevron.96da6131.svg"},116:function(e,t,a){e.exports=a.p+"static/media/pencil.c6f2ff12.svg"},117:function(e,t,a){e.exports=a.p+"static/media/plus.14e74331.svg"},122:function(e,t,a){e.exports=a(197)},128:function(e,t,a){},18:function(e,t,a){e.exports=a.p+"static/media/icon-back.d68bf51d.svg"},197:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),o=a.n(c),l=a(28),i=a(34),s=(a(127),a(128),a(54)),u=a(6),m=a(7),p=a(10),d=a(8),h=a(11),f=a(35),g=a.n(f),b=(a(88),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={previousRoutes:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){g.a.start()}},{key:"componentDidMount",value:function(){g.a.done()}},{key:"render",value:function(){var e=this.props,t=e.component,a=e.layout,n=Object(s.a)(e,["component","layout"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return r.a.createElement(a,null,r.a.createElement(t,e))}}))}}]),t}(n.Component)),E=a(12),v=a(53),y=r.a.createContext(),O=function(e){localStorage.setItem("routes",JSON.stringify(e))},j=function(){return JSON.parse(localStorage.getItem("routes"))||[]},N=function(e,t){return e.id<t.id?-1:e.id>t.id?1:0},S=function(e,t){return e.start_date<t.start_date?-1:e.start_date>t.start_date?1:0},k=function(e,t){return e.start_date<t.start_date?1:e.start_date>t.start_date?-1:0},w=function(){var e=localStorage.getItem("profile");return e?JSON.parse(e):null},D=function(){var e=localStorage.getItem("token");return e?JSON.parse(e):null},C=function(){localStorage.clear()},x=!0===localStorage.getItem("isAdmin");function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var T=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={previousRoutes:[],name:"",phone_number:"",room_number:""},a.checkExpirationTokenDate=function(){var e=a.props.history,t=JSON.parse(localStorage.getItem("expiration_date"));new Date(t)<new Date&&(C(),e.replace("/login"))},a.trackRoute=function(e){var t=a.state.previousRoutes;if(t.find(function(t){return t===e.location.pathname})){var n=t.slice(0,-1);a.setState({previousRoutes:n},function(){O(a.state.previousRoutes)})}else a.setState(function(e){return{previousRoutes:[].concat(Object(v.a)(e.previousRoutes),[a.props.location.pathname])}},function(){O(a.state.previousRoutes)})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){g.a.start()}},{key:"UNSAFE_componentWillUpdate",value:function(){g.a.start()}},{key:"componentDidMount",value:function(){if(w()){var e=w(),t=e.name,a=void 0===t?{}:t,n=e.phone_number,r=void 0===n?{}:n,c=e.room_number,o=void 0===c?{}:c;this.setState({previousRoutes:j(),name:a,phone_number:r,room_number:o})}g.a.done()}},{key:"componentDidUpdate",value:function(){g.a.done()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,a=this.state.previousRoutes;"/finish-report-private-zone"!==e.location.pathname&&"/finish-report-public-zone"!==e.location.pathname&&"/track-report"!==e.location.pathname?0===a.length&&j().length>0?this.setState({previousRoutes:j()},function(){return t.trackRoute(e)}):this.trackRoute(e):this.setState({previousRoutes:["/"]},function(){return O(["/"])})}},{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=t.layout,c=Object(s.a)(t,["component","layout"]);return r.a.createElement(y.Provider,{value:_({},this.state)},r.a.createElement(i.b,Object.assign({},c,{render:function(t){return D()?r.a.createElement(n,null,e.checkExpirationTokenDate(),r.a.createElement(a,t)):r.a.createElement(i.a,{to:"/login"})}})))}}]),t}(n.Component),F=Object(i.g)(T),I=a(202);var M=function(e){var t=e.children;return r.a.createElement(I.a,{className:"containerMobile"},t)},Y=a(32),A=a.n(Y),R=a(41),B=a(100),G=a.n(B);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var L="/api/helpdesk/tickets",q="/api/helpdesk/ticket",z="/api/helpdesk/areas",H="/api/helpdesk/categories",W="/api/helpdesk/stages",V="/api/helpdesk/stage",K="/api/helpdesk/schedules",Q="/api/helpdesk/schedule";function X(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}var Z=function(e,t){var a={Accept:"application/json"},n=D();return n&&(a.Authorization=n,function(){var e=JSON.parse(localStorage.getItem("profile")).role_group.find(function(e){return"Helpdesk Manager"===e.name});e?localStorage.setItem("isAdmin",!0):localStorage.setItem("isAdmin",!1)}(),"GET"!==t.method.toUpperCase()&&(a["Content-Type"]="application/json")),G()(e,J({headers:a},t)).then(X).then(function(){var e=Object(R.a)(A.a.mark(function e(t){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=J,e.t1={status:t.status},e.next=4,t.json();case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},$=a(42),ee=a(203),te=a(101),ae=a(43),ne=a(18),re=a.n(ne),ce=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChangeRoute=function(){var e=a.context.previousRoutes,t=e[e.length-1];t&&a.props.history.push(t)},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.header,a=e.handleSubmit,n=e.location,c=e.match,o=n.pathname,i=c.path;return r.a.createElement(I.a,{className:"containerMobile mt-4"},r.a.createElement(ee.a,null,"/"!==o?r.a.createElement(te.a,null,r.a.createElement("span",{className:"buttonBack",onClick:this.handleChangeRoute},r.a.createElement("img",{src:re.a,alt:"icon_back",style:{transform:"rotate(180deg)"}}))):r.a.createElement(te.a,{className:"text-right"},r.a.createElement(l.b,{style:{color:"#E64343",fontSize:"14px",fontWeight:"bold"},to:"#"},"EN"))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement("div",{className:"titleMain"},t)),i.includes(":category")&&!i.includes("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19")?r.a.createElement("div",{className:"text-right medText green mt-3 mr-3",onClick:a},"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01"):null))}}]),t}(n.Component);ce.contextType=y;var oe=Object(i.g)(ce);function le(){var e=Object($.a)(["\n  margin-top: 0;\n"]);return le=function(){return e},e}var ie=ae.a.hr(le()),se=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.header,a=e.handleSubmit,n=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,null,r.a.createElement(te.a,null)),r.a.createElement(oe,{handleSubmit:a,header:t}),r.a.createElement(ie,null),r.a.createElement(I.a,{className:"containerMobile"},r.a.createElement(ee.a,null,r.a.createElement(te.a,null,n))))}}]),t}(n.Component),ue=a(209),me=a(207),pe=a(204),de=function(e){return r.a.createElement(me.a,{show:e.confirm,onHide:e.handleShowConfirm,size:"sm",centered:!0},r.a.createElement(me.a.Body,null,r.a.createElement(ee.a,{className:"pb-4"},r.a.createElement(te.a,{xs:4},r.a.createElement("strong",{style:{textDecoration:"underline"}},"\u0e22\u0e37\u0e19\u0e22\u0e31\u0e19"))),r.a.createElement(ee.a,{className:"pb-4"},r.a.createElement(te.a,null,r.a.createElement("div",{className:"font-weight-bold h5"},e.ticketName),r.a.createElement("div",null,"\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e2a\u0e16\u0e32\u0e19\u0e30\u0e40\u0e1b\u0e47\u0e19"," ",r.a.createElement("strong",{className:e.buttonName},e.buttonName)," ","\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48 ?"))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null),r.a.createElement(te.a,{xs:"auto"},r.a.createElement("span",{className:"pr-2"},r.a.createElement(pe.a,{variant:"outline-dark",onClick:e.handleShowConfirm},"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01")),r.a.createElement(pe.a,{variant:"primary",onClick:function(){return e.handleChangeStage(e.ticketID)}},"\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19")))))},he=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{body:!0,className:"btnMenu",onClick:e.handleClick},r.a.createElement(ee.a,{style:{alignItems:"center"}},r.a.createElement(te.a,{xs:"auto"},e.iconFront||e.iconNameFront?r.a.createElement("img",{src:e.iconFront?"".concat("http://erpdev.winservecorp.co.th:8069/web/content/").concat(e.iconFront):e.iconNameFront,alt:"icon",className:"img-fluid"}):null),r.a.createElement(te.a,{className:e.activeStage&&"text-center ".concat(e.buttonName),style:{padding:"0px"}},e.buttonName),r.a.createElement(te.a,{xs:"auto"},e.iconNameBack?r.a.createElement("img",{src:e.iconNameBack,alt:"icon_name",className:"img-fluid"}):e.notifyReportCount?r.a.createElement("div",{className:e.notifyReportCount<10?"circle":e.notifyReportCount<100?"circle2Digits":"circle3Digits"},r.a.createElement("span",{className:"smallText md red"},e.notifyReportCount)):null))),r.a.createElement(de,e))},fe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleRoute=function(){var e=a.props,t=e.path,n=e.state,r=e.history,c={};t&&(c.pathname=t,n&&(c.state=n)),r.push(c)},a.handleChangeStage=function(e){var t=a.props,n=t.activeStage,r=t.handleShowConfirm,c=t.getData;Z("".concat(V,"/").concat(e),{method:"PUT",body:JSON.stringify({params:{stage_id:n.stage_id+1}})}).then(function(e){console.log(e),r(),c()}).catch(function(e){console.log(e)})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.handleRoute,t=this.handleChangeStage,a=this.props,n=a.activeStage,c=a.buttonName,o=a.handleShowConfirm;return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(he,Object.assign({handleClick:n?o:e,handleChangeStage:t},this.props)):null)}}]),t}(n.Component),ge=Object(i.g)(fe),be=function(){var e=Object(n.useContext)(y);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{className:"profileWrapper"},r.a.createElement(te.a,null,r.a.createElement("div",null,e.name,r.a.createElement("br",null),e.phone_number),r.a.createElement("div",{className:"roomNumber"},e.room_number))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement("hr",null))))},Ee=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(be,null)}}]),t}(n.Component),ve=a(106),ye=a.n(ve),Oe=a(107),je=a.n(Oe),Ne=a(108),Se=a.n(Ne),ke=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,reportCount:null},a.getData=function(){var e=a.props.history,t=a.context.name;Z(L,{method:"GET"}).then(function(n){if(n.status<401)if(x)a.setState({reportCount:n.count});else{var r=n.rows.filter(function(e){return e.partner.name===t});a.setState({reportCount:r.length})}else C(),e.replace("/login")})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.reportCount;return r.a.createElement(se,{header:"\u0e2b\u0e19\u0e49\u0e32\u0e41\u0e23\u0e01"},r.a.createElement(Ee,null),r.a.createElement(ge,{path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19",buttonName:"\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32",iconNameFront:ye.a,iconNameBack:re.a}),r.a.createElement(ge,{path:"/track-report",buttonName:"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21\u0e1c\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07",iconNameFront:je.a,iconNameBack:!e&&re.a,notifyReportCount:e}),r.a.createElement(ge,{path:"/maintenance-schedule",buttonName:"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e0b\u0e48\u0e2d\u0e21\u0e1a\u0e33\u0e23\u0e38\u0e07",iconNameFront:Se.a,iconNameBack:re.a}))}}]),t}(n.Component);ke.contextType=y;var we=ke,De=function(){var e=Object(R.a)(A.a.mark(function e(t,a){var n,r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=25;break}return e.prev=1,"db",e.next=5,Z("/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({params:{db:"db",username:t,password:a}})});case 5:return n=e.sent,e.next=8,c=n.result,o=n.result.access_token,localStorage.setItem("profile",JSON.stringify(c)),void localStorage.setItem("token",JSON.stringify(o));case 8:if(200!==n.status){e.next=16;break}return r=new Date,2,r.setHours(r.getHours()+2),localStorage.setItem("expiration_date",JSON.stringify(r)),e.abrupt("return",!0);case 16:return e.abrupt("return",!1);case 17:e.next=23;break;case 19:if(e.prev=19,e.t0=e.catch(1),!e.t0){e.next=23;break}return e.abrupt("return",!1);case 23:e.next=26;break;case 25:console.log("No response");case 26:case"end":return e.stop()}var c,o},e,null,[[1,19]])}));return function(t,a){return e.apply(this,arguments)}}(),Ce=a(208),xe=a(206);function Pe(){var e=Object($.a)(["\n  margin-top: 0;\n"]);return Pe=function(){return e},e}var _e=ae.a.hr(Pe()),Te=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",requiredUsername:!1,requiredPassword:!1,alertStatus:!0},a.handleInputChanged=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,r))},a.handleLogin=function(){var e=Object(R.a)(A.a.mark(function e(t){var n,r,c,o,l;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state,r=n.username,c=n.password,o=a.props.history,r||c?r?c||a.setState({requiredUsername:!1,requiredPassword:!0}):a.setState({requiredUsername:!0,requiredPassword:!1}):a.setState({requiredUsername:!0,requiredPassword:!0}),e.next=6,De(r,c);case 6:(l=e.sent)?o.push("/"):a.setState({alertStatus:l});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password,c=t.requiredUsername,o=t.requiredPassword,l=t.alertStatus,i=this.handleInputChanged,s=this.handleLogin;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{className:"mt-5"},r.a.createElement(te.a,null,r.a.createElement("h1",{style:{textAlign:"center"}},"Smart Service"),r.a.createElement(_e,null))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,!l&&r.a.createElement(Ce.a,{className:"mt-4",variant:"danger",onClose:function(){return e.setState({alertStatus:!0})},dismissible:!0},"authentication failed"),r.a.createElement(xe.a,{onSubmit:s},r.a.createElement(xe.a.Group,{controlId:"formBasicEmail"},r.a.createElement(xe.a.Label,null,"Username"),r.a.createElement(xe.a.Control,{name:"username",onChange:i,value:a,type:"text",className:c?"is-invalid":""}),r.a.createElement(xe.a.Control.Feedback,{type:"invalid"},"Username is Required!")),r.a.createElement(xe.a.Group,{controlId:"formBasicPassword"},r.a.createElement(xe.a.Label,null,"Password"),r.a.createElement(xe.a.Control,{name:"password",onChange:i,value:n,type:"password",className:o?"is-invalid":""}),r.a.createElement(xe.a.Control.Feedback,{type:"invalid"},"Password is Required!")),r.a.createElement(pe.a,{variant:"success",type:"submit",block:!0},"Enter")))))}}]),t}(n.Component),Fe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={allAreas:""},a.getArea=function(){var e=a.props.history;Z(z,{method:"GET"}).then(function(t){401!==t.status?a.setState({allAreas:t.rows}):(C(),e.replace("/login"))})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getArea()}},{key:"render",value:function(){var e=this.state.allAreas,t=this.props.location.pathname;return r.a.createElement(se,{header:"\u0e41\u0e08\u0e49\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32"},r.a.createElement("div",{className:"titleSub mb-2"},"\u0e1a\u0e23\u0e34\u0e40\u0e27\u0e13\u0e02\u0e2d\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32"),e.length>0&&r.a.createElement(r.a.Fragment,null,e.map(function(a){return r.a.createElement(ge,{key:a.id,path:"".concat(t,"/").concat(a.name),buttonName:a.name,iconFront:a.attachments.id,iconNameBack:re.a,state:e})})))}}]),t}(n.Component),Ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={privateArea:"",allCategories:[]},a.getData=function(){var e=a.props.history;Z(z,{method:"GET"}).then(function(t){if(401!==t.status){var n=t.rows.find(function(e){return"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"===e.name}),r=n.categories.sort(N);n&&r&&a.setState({privateArea:n,allCategories:r})}else C(),e.replace("/login")})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.privateArea,t=e.id,a=e.name,n=this.state.allCategories,c=this.props.location.pathname;return r.a.createElement(se,{header:"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"},r.a.createElement("div",{className:"titleSub mb-2"},"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e02\u0e2d\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32"),n.map(function(e){return r.a.createElement(ge,{key:e.id,path:"".concat(c,"/").concat(e.name),buttonName:e.name,iconFront:e.attachments.id,iconNameBack:re.a,state:{name:a,id:t,category:e}})}))}}]),t}(n.Component),Me=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={publicArea:"",allCategories:[]},a.getData=function(){var e=a.props.history;Z(z,{method:"GET"}).then(function(t){if(401!==t.status){var n=t.rows.find(function(e){return"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07"===e.name}),r=n.categories.sort(N);n&&r&&a.setState({publicArea:n,allCategories:r})}else C(),e.replace("/login")})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.publicArea,t=e.id,a=e.name,n=this.state.allCategories,c=this.props.location.pathname;return r.a.createElement(se,{header:c.includes("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19")?"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07":"\u0e2a\u0e23\u0e49\u0e32\u0e07"},r.a.createElement("div",{className:"titleSub mb-2"},c.includes("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19")?"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e02\u0e2d\u0e07\u0e1b\u0e31\u0e0d\u0e2b\u0e32":"\u0e1b\u0e23\u0e30\u0e40\u0e20\u0e17\u0e02\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e0b\u0e48\u0e2d\u0e21\u0e1a\u0e33\u0e23\u0e38\u0e07"),n.map(function(e){return r.a.createElement(ge,{key:e.name,path:"".concat(c,"/").concat(e.name),buttonName:e.name,iconFront:e.attachments.id,iconNameBack:re.a,state:c.includes("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19")?{name:a,id:t,category:e}:{title:"\u0e2a\u0e23\u0e49\u0e32\u0e07",id:t,category:e}})}))}}]),t}(n.Component),Ye=a(205),Ae=a(68),Re=a.n(Ae),Be=(a(153),a(109)),Ge=a.n(Be),Ue=function(e){var t=e.handleSubmit,a=e.disabled,n=void 0!==a&&a;return r.a.createElement(ue.a,{body:!0,className:"btnMenu ".concat(n&&"disabled"),onClick:t},r.a.createElement(ee.a,null,r.a.createElement(te.a,{className:"text-center"},"\u0e2a\u0e48\u0e07\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07"),r.a.createElement("div",{className:"iconBackAbs"},r.a.createElement("img",{src:n?Ge.a:re.a,alt:"icon_name",className:"img-fluid"}))))},Je=a(110),Le=a.n(Je);function qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var ze=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={showCamera:!1,title:{status:!1,detail:""},desc:{status:!1,detail:""},tempPhotos:[]},a.fileInput=null,a.handleSubmit=function(){var e=a.state,t=e.title,n=e.desc,r=e.tempPhotos,c=a.props,o=c.history,l=c.header,i=a.props.location.state,s=i.id,u=i.category;t.detail&&n.detail&&r.length>0&&Z(q,{method:"POST",body:JSON.stringify({params:{name:t.detail,description:n.detail,team_id:s,category_id:u.id,attachments:r}})}).then(function(e){200===e.status&&("\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07"===l?o.push("/finish-report-public-zone"):o.push("/finish-report-private-zone"))})},a.getBase64image=function(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})},a.handleChange=function(e){var t=a.state.tempPhotos,n=e.target,r=n.value,c=n.name,o=n.files;"upload"===c?a.getBase64image(o[0]).then(function(e){t[0]?a.setState(function(t){return{tempPhotos:[].concat(Object(v.a)(t.tempPhotos),[{data:e}])}},function(){return a.fileInput.value=""}):a.setState({tempPhotos:[{data:e}]},function(){return a.fileInput.value=""})}):a.setState(Object(E.a)({},c,{detail:r}))},a.handleToggleCamera=function(){a.setState(function(e){return{showCamera:!e.showCamera}})},a.handleFocus=function(e){var t=e.target.name;a.setState(function(e){return Object(E.a)({},t,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?qe(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e[t],{status:!e[t].status}))})},a.onTakePhoto=function(e){a.state.tempPhotos[0]?a.setState(function(t){return{tempPhotos:[].concat(Object(v.a)(t.tempPhotos),[{data:e}])}}):a.setState({tempPhotos:[{data:e}]})},a.deleteTempPhoto=function(e){a.setState(function(t){return{tempPhotos:t.tempPhotos.filter(function(t,a){return a!==e})}})},a.handleClickInputFile=function(){return a.fileInput.click()},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onCameraError",value:function(e){console.error("onCameraError",e)}},{key:"onCameraStart",value:function(){console.log("onCameraStart")}},{key:"onCameraStop",value:function(){console.log("onCameraStop")}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.desc,c=t.showCamera,o=t.tempPhotos,l=!0;return a.detail&&n.detail&&o.length>0&&(l=!1),r.a.createElement(xe.a,{className:"myForm"},r.a.createElement(xe.a.Group,null,r.a.createElement(xe.a.Label,{className:a.status?"active":""},"\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07 :"),r.a.createElement(xe.a.Control,{name:"title",type:"text",onFocus:this.handleFocus,onBlur:this.handleFocus,onChange:this.handleChange})),r.a.createElement(xe.a.Group,null,r.a.createElement(xe.a.Label,{className:n.status?"active":""},"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14 :"),r.a.createElement(xe.a.Control,{name:"desc",as:"textarea",onFocus:this.handleFocus,onBlur:this.handleFocus,onChange:this.handleChange})),r.a.createElement(xe.a.Group,{className:"mb-0"},r.a.createElement(xe.a.Label,{className:"mb-2"},"\u0e23\u0e39\u0e1b\u0e1b\u0e23\u0e30\u0e01\u0e2d\u0e1a :"),r.a.createElement(ee.a,{style:{margin:"0 -.25rem"},noGutters:!0},o.length>0&&o.map(function(t,a){return r.a.createElement(te.a,{xs:"3",className:"mb-2 px-1",key:a},r.a.createElement("div",{onClick:function(){return e.deleteTempPhoto(a)},className:"boxIconAbs"},r.a.createElement(Ye.a,{src:Le.a,alt:"icon_bin",className:"iconAbs"}),r.a.createElement(Ye.a,{src:t.data,className:"img-fluid "})))})),c&&r.a.createElement(Re.a,{onTakePhoto:function(t){e.onTakePhoto(t)},onCameraError:function(t){e.onCameraError(t)},idealFacingMode:Ae.FACING_MODES.ENVIRONMENT,imageType:Ae.IMAGE_TYPES.JPG,imageCompression:.97,isMaxResolution:!1,isImageMirror:!1,isSilentMode:!0,isDisplayStartCameraError:!0,sizeFactor:1,onCameraStart:function(){e.onCameraStart()},onCameraStop:function(){e.onCameraStop()}}),r.a.createElement(ee.a,{className:"mt-2"},r.a.createElement(te.a,{className:"pr-1"},r.a.createElement(pe.a,{block:!0,variant:"outline-secondary",className:"btnTheme",onClick:this.handleToggleCamera},c?"\u0e1b\u0e34\u0e14\u0e01\u0e25\u0e49\u0e2d\u0e07":"\u0e16\u0e48\u0e32\u0e22\u0e23\u0e39\u0e1b")),r.a.createElement(te.a,{className:"pl-1"},r.a.createElement(pe.a,{onClick:this.handleClickInputFile,block:!0,variant:"outline-secondary",className:"btnTheme"},"\u0e2d\u0e31\u0e1e\u0e42\u0e2b\u0e25\u0e14\u0e23\u0e39\u0e1b"),r.a.createElement("input",{name:"upload",style:{display:"none"},onChange:this.handleChange,ref:function(t){return e.fileInput=t},type:"file"}))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement("hr",null)))),r.a.createElement(Ue,{disabled:l,handleSubmit:this.handleSubmit}))}}]),t}(n.Component),He=Object(i.g)(ze),We=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={headerId:"",headerName:"",categId:"",categName:"",categIcon:""},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.state,t=e.category,a=e.id,n=e.name;this.setState({headerId:a,headerName:n,categId:t.id,categName:t.name,categIconUrl:t.attachments.url,categIconId:t.attachments.id})}},{key:"render",value:function(){var e=this.state,t=e.headerName,a=e.categId,n=e.categName,c=e.categIconId;return r.a.createElement(se,{header:t},r.a.createElement(ge,{buttonName:n,iconFront:c}),r.a.createElement(He,{typeId:a}))}}]),t}(n.Component),Ve=function(e){var t=e.iconName,a=e.history,n=e.pathForward;return r.a.createElement(se,{header:"\u0e2a\u0e48\u0e07\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08"},r.a.createElement(ue.a,{className:"boxFinishReport text-center",style:{top:"30%"}},r.a.createElement(ue.a.Body,null,r.a.createElement("img",{src:t,alt:"icon_callcenter"}),r.a.createElement("div",{className:"mainTitle"},"\u0e40\u0e23\u0e32\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13",r.a.createElement("br",null),"\u0e40\u0e23\u0e35\u0e22\u0e1a\u0e23\u0e49\u0e2d\u0e22\u0e41\u0e25\u0e49\u0e27"),r.a.createElement("div",{className:"subTitle"},"\u0e40\u0e23\u0e32\u0e08\u0e30\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23",r.a.createElement("br",null),"\u0e43\u0e2b\u0e49\u0e40\u0e23\u0e47\u0e27\u0e17\u0e35\u0e48\u0e2a\u0e38\u0e14\u0e40\u0e17\u0e48\u0e32\u0e17\u0e35\u0e48\u0e08\u0e30\u0e40\u0e1b\u0e47\u0e19\u0e44\u0e1b\u0e44\u0e14\u0e49")),r.a.createElement(ue.a.Footer,null,r.a.createElement("div",{onClick:function(){return a.push(n)}},r.a.createElement("div",{className:"title"},"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21\u0e1c\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07"),r.a.createElement("div",{className:"imgAbs"},r.a.createElement("img",{src:re.a,alt:"icon_back"}))))))},Ke=a(111),Qe=a.n(Ke),Xe=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement(Ve,{iconName:Qe.a,pathForward:"track-report",history:e})}}]),t}(n.Component),Ze=a(112),$e=a.n(Ze),et=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement(Ve,{iconName:$e.a,pathForward:"track-report",history:e})}}]),t}(n.Component),tt=a(48),at=a(19),nt=a.n(at);function rt(){var e=Object($.a)(["\n  margin: 0;\n"]);return rt=function(){return e},e}var ct=ae.a.hr(rt()),ot=function(e){var t=e.ticket,a=e.allStages,c=e.getData,o=Object(n.useState)(!1),l=Object(tt.a)(o,2),i=l[0],s=l[1],u=Object(n.useState)(t),m=Object(tt.a)(u,2),p=m[0],d=m[1];Object(n.useEffect)(function(){d(t)},[t]);var h=p.stages.find(function(e){return e.stage_name===p.stage_name}),f=a.find(function(e){return e.id===h.stage_id+1}),g=p.stages.sort(N),b=r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,null),r.a.createElement(ue.a.Body,null,r.a.createElement(ee.a,{noGutters:!0},r.a.createElement(te.a,null,g.filter(function(e){return e.stage_id>=2}).map(function(e,t){return r.a.createElement("div",{key:t,className:"smallText ".concat(e.stage_name)},e.stage_name)})),r.a.createElement(te.a,{className:"text-right"},r.a.createElement("div",{className:"smallText grey"},g.filter(function(e){return e.stage_id>=2}).map(function(e){return r.a.createElement("div",{key:e.id},nt()(e.created).format("DD/MM/YYYY")," \u2022"," ",nt()(e.created).format("hh:mm"),r.a.createElement("br",null))})))))),E=r.a.createElement(r.a.Fragment,null,r.a.createElement(ct,null),r.a.createElement(ue.a.Body,null,r.a.createElement(ee.a,{noGutters:!0,className:"\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23\u0e40\u0e2a\u0e23\u0e47\u0e08\u0e2a\u0e34\u0e49\u0e19"!==h.stage_name&&"pb-2"},r.a.createElement(te.a,null,g.filter(function(e){return e.stage_id>=2}).map(function(e,t){return r.a.createElement("div",{key:t,className:"smallText ".concat(e.stage_name)},e.stage_name)})),r.a.createElement(te.a,{className:"text-right"},r.a.createElement("div",{className:"smallText grey"},g.filter(function(e){return e.stage_id>=2}).map(function(e){return r.a.createElement("div",{key:e.id},nt()(e.created).format("DD/MM/YYYY")," \u2022"," ",nt()(e.created).format("hh:mm"),r.a.createElement("br",null))})))),r.a.createElement(ge,{ticketID:t.id,ticketName:t.name,buttonName:f&&f.name,activeStage:h,confirm:i,handleShowConfirm:function(){return s(!i)},getData:c})));return r.a.createElement(ue.a,{className:"myCard"},r.a.createElement(ue.a.Header,null,r.a.createElement(ee.a,{noGutters:!0,style:{alignItems:"center"}},r.a.createElement(te.a,{xs:"auto"},r.a.createElement("img",{src:"http://erpdev.winservecorp.co.th:8069/web/content/"+t.category.attachments.id,alt:"icon"})),r.a.createElement(te.a,{className:"px-2"},r.a.createElement("div",null,t.name),r.a.createElement("div",{className:"smallText grey"},nt()(t.created).format("DD/MM/YYYY")," \u2022"," ",nt()(t.created).format("hh:mm"))),r.a.createElement(te.a,{className:"text-right",xs:"auto"},x?"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e2a\u0e48\u0e07"!==h.stage_name?r.a.createElement("span",{className:"smallText stage ".concat(h.stage_name)},h.stage_name):null:r.a.createElement("span",{className:"smallText stage ".concat(h.stage_name)},h.stage_name)))),r.a.createElement(ue.a.Body,null,r.a.createElement(ee.a,{noGutters:!0},r.a.createElement(te.a,null,r.a.createElement("div",{className:"smallText titleSub"},"\u0e23\u0e32\u0e22\u0e25\u0e30\u0e40\u0e2d\u0e35\u0e22\u0e14"),r.a.createElement("div",{className:"smallText grey mb-3"},t.description),r.a.createElement("div",{className:"smallText titleSub"},"\u0e41\u0e08\u0e49\u0e07\u0e42\u0e14\u0e22"),r.a.createElement("div",{className:"smallText grey"},"\u0e2b\u0e49\u0e2d\u0e07 ",t.partner.room_number," \u2022 ",t.partner.name)),r.a.createElement(te.a,{className:"px-3",xs:"auto"},t.attachments.length>0&&t.attachments.map(function(e,t){return r.a.createElement(ee.a,{key:t,className:"pb-2"},r.a.createElement("img",{width:"120px",src:"http://erpdev.winservecorp.co.th:8069/web/content/"+e.id,alt:"img",className:"img-fluid"}))})))),x?E:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e2a\u0e48\u0e07"!==h.stage_name&&b)},lt=a(113),it=a.n(lt),st=a(114),ut=a.n(st),mt=a(115),pt=a.n(mt),dt=function(e){var t=Object(n.useState)(e.isShowPrivate),a=Object(tt.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(e.isShowPublic),i=Object(tt.a)(l,2),s=i[0],u=i[1];return Object(n.useEffect)(function(){o(e.isShowPrivate)},[e.isShowPrivate]),Object(n.useEffect)(function(){u(e.isShowPublic)},[e.isShowPublic]),r.a.createElement(ee.a,{className:"mb-2"},r.a.createElement(te.a,null,r.a.createElement("div",{className:"titleSub"},e.title)),r.a.createElement("div",null,s),r.a.createElement(te.a,{className:"text-right"},r.a.createElement("div",{onClick:e.toggleReportList},e.haveData?r.a.createElement("img",{className:x?"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"===e.title?c?"":"rotateTitleIcon":s?"":"rotateTitleIcon":"titleIcon",src:x?pt.a:"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"===e.title?it.a:ut.a,alt:"icon_for_".concat(e.title)}):null)))},ht=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={publicTickets:[],privateTickets:[],isShowPrivate:!0,isShowPublic:!0,loading:!0},a.getData=function(){var e=a.props.history,t=a.context.name;Z(W,{method:"GET"}).then(function(t){t.status<400?a.setState({allStages:t.rows}):(C(),e.replace("/login"))}).catch(function(e){console.log(e)}),Z(L,{method:"GET"}).then(function(n){n.status<400?a.setState(function(){var e=n.rows.filter(function(e){return"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27"===e.area.name}),a=n.rows.filter(function(e){return"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07"===e.area.name});return x?{privateTickets:e,publicTickets:a,loading:!1}:{privateTickets:e.filter(function(e){return e.partner.name===t}),publicTickets:a.filter(function(e){return e.partner.name===t}),loading:!1}}):(C(),e.replace("/login"))}).catch(function(e){console.log(e)})},a.toggleReportList=function(e){return function(){a.setState(function(t){return Object(E.a)({},e,!t[e])})}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.getData,t=this.state,a=t.allStages,n=t.privateTickets,c=t.publicTickets,o=t.isShowPrivate,l=t.isShowPublic,i=t.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(se,{header:"\u0e15\u0e34\u0e14\u0e15\u0e32\u0e21\u0e1c\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07"},r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(dt,{title:"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27",toggleReportList:x?this.toggleReportList("isShowPrivate"):null,haveData:n.length,isShowPrivate:o}),o?n.length>0&&!i?r.a.createElement(ee.a,null,r.a.createElement(te.a,null,n.map(function(t,n){return r.a.createElement("div",{key:t.id,className:t.length-1===n?null:"mb-3"},r.a.createElement(ot,{ticket:t,allStages:a,getData:e}))}),r.a.createElement("hr",null))):i?r.a.createElement("hr",null):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"pl-3"},"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"),r.a.createElement("hr",null)):r.a.createElement("hr",null))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(dt,{title:"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07",toggleReportList:x?this.toggleReportList("isShowPublic"):null,haveData:c.length,isShowPublic:l}),l?c.length>0&&!i?r.a.createElement(ee.a,null,r.a.createElement(te.a,null,c.map(function(t){return r.a.createElement("div",{key:t.id,className:"mb-3"},r.a.createElement(ot,{ticket:t,allStages:a,getData:e}))}))):i?r.a.createElement("hr",null):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"pl-3"},"\u0e44\u0e21\u0e48\u0e21\u0e35\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e01\u0e32\u0e23\u0e41\u0e08\u0e49\u0e07\u0e0b\u0e48\u0e2d\u0e21"),r.a.createElement("hr",null)):r.a.createElement("hr",null)))))}}]),t}(n.Component);ht.contextType=y;var ft=ht,gt=a(116),bt=a.n(gt),Et=Object(i.g)(function(e){var t=function(t){var a=e.history,n=e.location,r="".concat(n.pathname,"/edit/").concat(e.category,"/").concat(t.id);a.push(r)},a=e.sortData.find(function(e){return nt()(e.end_date).format("DD/MM/YYYY")<nt()(new Date).format("DD/MM/YYYY")}),n=e.sortData.sort(S).find(function(e){return nt()(e.end_date).format("DD/MM/YYYY")>=nt()(new Date).format("DD/MM/YYYY")}),c=n?n.category.attachments.id:a.category.attachments.id;return r.a.createElement(ue.a,{className:"myCard mb-2"},r.a.createElement(ue.a.Header,null,r.a.createElement(ee.a,{noGutters:!0,style:{alignItems:"center"}},r.a.createElement(te.a,{className:"pb-2",xs:2},r.a.createElement("img",{src:"".concat("http://erpdev.winservecorp.co.th:8069/web/content/").concat(c),alt:"icon"})),r.a.createElement(te.a,{className:"smallText md pl-1",xs:9},r.a.createElement("div",null,n?n.name:a.name),r.a.createElement("div",{className:"smallText grey"},n?r.a.createElement(r.a.Fragment,null,nt()(n.start_date).format("DD/MM/YYYY"),n.end_date&&" -".concat(" ","\n                  ",nt()(n.end_date).format("DD/MM/YYYY"))):r.a.createElement(r.a.Fragment,null,nt()(a.start_date).format("DD/MM/YYYY"),a.end_date&&" -".concat(" ","\n                  ",nt()(a.end_date).format("DD/MM/YYYY"))))),r.a.createElement(te.a,{className:"pb-3",xs:1},x&&r.a.createElement("img",{onClick:n?function(){return t(n)}:function(){return t(a)},src:bt.a,alt:"edit_icon"})))),a?r.a.createElement(ue.a.Body,null,r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement("div",{className:"smallText purple mb-1"},"\u0e17\u0e35\u0e48\u0e1c\u0e48\u0e32\u0e19\u0e21\u0e32 \u2022"," ",a.end_date?nt()(a.end_date).format("DD/MM/YYYY"):nt()(a.start_date).format("DD/MM/YYYY")),r.a.createElement("div",{className:"smallText grey"},a.name)))):null)}),vt=a(117),yt=a.n(vt),Ot=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={sortedCategorySchedule:[],maintenanceSchedule:[]},a.getData=function(){var e=a.props.history;Z(K,{method:"GET"}).then(function(t){t.status<400?(a.setState({maintenanceSchedule:t.rows}),Z(H,{method:"GET"}).then(function(e){var t=e.rows.map(function(e){return e.id});a.sortedDataByCategories(t)})):(C(),e.replace("/login"))})},a.sortedDataByCategories=function(e){var t=a.state.maintenanceSchedule,n=[];e.forEach(function(e){var a=t.sort(k).filter(function(t){return t.category.id===e});if(a.length>0){var r=a[0].category.id,c=a[0].category.name;n.push({id:r,category_name:c,all_schedules:a})}}),a.setState({sortedCategorySchedule:n})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state.sortedCategorySchedule,t=this.props.location.pathname;return r.a.createElement(se,{header:"\u0e15\u0e32\u0e23\u0e32\u0e07\u0e0b\u0e48\u0e2d\u0e21\u0e1a\u0e33\u0e23\u0e38\u0e07"},r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement("div",{className:"titleSub mb-2"},"\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07"),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,e.map(function(e){return r.a.createElement(Et,{key:e.id,category:e.category_name,sortData:e.all_schedules})}))))),x&&r.a.createElement(ge,{iconNameFront:yt.a,iconNameBack:re.a,buttonName:"\u0e2a\u0e23\u0e49\u0e32\u0e07",path:"".concat(t,"/public-zone")}))}}]),t}(n.Component),jt=a(85),Nt=a.n(jt),St=function(e){var t=e.buttonName,a=e.iconFrontId;return r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(ue.a,{body:!0,style:{borderRadius:"4px"},className:"btnMenu"},r.a.createElement(ee.a,{style:{alignItems:"center"}},r.a.createElement(te.a,{xs:"auto"},r.a.createElement("img",{style:{opacity:"0.3"},src:a&&"http://erpdev.winservecorp.co.th:8069/web/content/"+a,alt:"icon_name",className:"img-fluid"})),r.a.createElement(te.a,{className:"medText grey",style:{padding:"0px"}},t)))))};function kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var wt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:{status:!1,detail:""},startDate:null,endDate:null},a.handleFocus=function(e){var t=e.target.name;a.setState(function(e){return Object(E.a)({},t,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kt(a,!0).forEach(function(t){Object(E.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kt(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e[t],{status:!e[t].status}))})},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(e,t){e.name.detail===this.props.name.detail&&e.startDate===this.props.startDate&&e.endDate===this.props.endDate||this.setState({name:{detail:this.props.name.detail},startDate:this.props.startDate,endDate:this.props.endDate})}},{key:"render",value:function(){var e=this.props,t=e.buttonName,a=e.iconFrontId,n=e.handleChangeDate,c=e.handleChangeInput,o=this.state,l=o.name,i=o.startDate,s=o.endDate,u=this.handleFocus;return r.a.createElement(r.a.Fragment,null,r.a.createElement(St,{buttonName:t,iconFrontId:a}),r.a.createElement(xe.a,{className:"myForm"},r.a.createElement(xe.a.Group,null,r.a.createElement("label",{className:"medText purple"},"\u0e27\u0e31\u0e19\u0e17\u0e35\u0e48 : "),r.a.createElement(ee.a,{style:{paddingBottom:"40px"}},r.a.createElement(te.a,{xs:"5"},r.a.createElement(Nt.a,{selected:i,onChange:n("startDate"),startDate:i,endDate:s,dateFormat:"dd/MM/yyyy",placeholderText:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e27\u0e31\u0e19",dropdownMode:"select",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,selectsStart:!0,isClearable:!0,withPortal:!0})),r.a.createElement(te.a,{xs:"1"},"\u21d2"),r.a.createElement(te.a,{xs:"5"},r.a.createElement(Nt.a,{selected:s,onChange:n("endDate"),endDate:s,minDate:i,dateFormat:"dd/MM/yyyy",placeholderText:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e27\u0e31\u0e19",dropdownMode:"select",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,selectsEnd:!0,isClearable:!0,withPortal:!0}))),r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(xe.a.Label,{className:l.status?"active":""},"\u0e40\u0e23\u0e37\u0e48\u0e2d\u0e07 :"),r.a.createElement(xe.a.Control,{name:"name",as:"textarea",value:l.detail,onFocus:u,onBlur:u,onChange:c}))))))}}]),t}(n.Component),Dt=Object(i.g)(wt),Ct=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:{status:!1,detail:""},startDate:null,endDate:null,header:"",buttonName:"",iconFrontId:""},a.handleSubmit=function(){var e=a.props.location.state.category,t=a.props.history,n=a.state,r=n.name,c=n.startDate,o=n.endDate;Z(Q,{method:"POST",body:JSON.stringify({params:{name:r.detail,schedule_date:c,end_date:o,equipment_id:e.id}})}).then(function(e){console.log(e),t.push("/maintenance-schedule")}).catch(function(e){console.log(e)})},a.handleChangeDate=function(e){return function(t){a.setState(Object(E.a)({},e,t))}},a.handleChangeInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,{detail:r}))},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.state,t=e.category,a=e.title;this.setState({header:a,buttonName:t.name,iconFrontId:t.attachments.id})}},{key:"render",value:function(){var e=this.state,t=e.header,a=e.buttonName,n=e.iconFrontId;return r.a.createElement(se,Object.assign({},this,this.state,{header:t}),r.a.createElement(Dt,Object.assign({},this,this.state,{buttonName:a,iconFrontId:n})))}}]),t}(n.Component),xt=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={title:"\u0e41\u0e01\u0e49\u0e44\u0e02\u0e15\u0e32\u0e23\u0e32\u0e07\u0e0b\u0e48\u0e2d\u0e21",name:{status:!1,detail:""},startDate:null,endDate:null,categoryName:"",categoryAttachId:""},a.getData=function(){var e=a.props.match.params.id,t=a.props.history;Z("".concat(Q,"/").concat(e),{method:"GET"}).then(function(e){e.status<400?a.setState({name:{detail:e.name},startDate:new Date(e.start_date),endDate:new Date(e.end_date),categoryName:e.category.name,categoryAttachId:e.category.attachments.id}):(C(),t.replace("/login"))}).catch(function(e){console.log(e)})},a.handleSubmit=function(){var e=a.props.match.params.id,t=a.props.history,n=a.state,r=n.name,c=n.startDate,o=n.endDate;Z("".concat(Q,"/").concat(e),{method:"PUT",body:JSON.stringify({params:{name:r.detail,schedule_date:c,end_date:o}})}).then(function(e){console.log(e),t.push("/maintenance-schedule")}).catch(function(e){console.log(e)})},a.handleChangeDate=function(e){return function(t){a.setState(Object(E.a)({},e,t))}},a.handleChangeInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,{detail:r}))},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this.state,t=e.title,a=e.categoryName,n=e.categoryAttachId;return r.a.createElement(se,Object.assign({},this,this.state,{header:t}),r.a.createElement(Dt,Object.assign({},this,this.state,{buttonName:a,iconFrontId:n})))}}]),t}(n.Component),Pt=function(e){return r.a.createElement("div",null,e.children)},_t=function(){return r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(b,{exact:!0,path:"/login",layout:M,component:Te}),r.a.createElement(F,{exact:!0,path:"/",layout:Pt,component:we}),r.a.createElement(F,{exact:!0,path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19",layout:Pt,component:Fe}),r.a.createElement(F,{exact:!0,path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19/\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27",layout:Pt,component:Ie}),r.a.createElement(F,{exact:!0,path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19/\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27/:category",layout:Pt,component:We}),r.a.createElement(F,{exact:!0,path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19/\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07",layout:Pt,component:Me}),r.a.createElement(F,{exact:!0,path:"/\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19/\u0e1e\u0e37\u0e49\u0e19\u0e17\u0e35\u0e48\u0e2a\u0e48\u0e27\u0e19\u0e01\u0e25\u0e32\u0e07/:category",layout:Pt,component:We}),r.a.createElement(F,{exact:!0,path:"/finish-report-private-zone",layout:Pt,component:Xe}),r.a.createElement(F,{exact:!0,path:"/finish-report-public-zone",layout:Pt,component:et}),r.a.createElement(F,{exact:!0,path:"/track-report",layout:Pt,component:ft}),r.a.createElement(F,{exact:!0,path:"/maintenance-schedule",layout:Pt,component:Ot}),r.a.createElement(F,{exact:!0,path:"/maintenance-schedule/public-zone",layout:Pt,component:Me}),r.a.createElement(F,{exact:!0,path:"/maintenance-schedule/public-zone/:category",layout:Pt,component:Ct}),r.a.createElement(F,{exact:!0,path:"/maintenance-schedule/edit/:category/:id",layout:Pt,component:xt}),r.a.createElement(F,{path:"*",layout:Pt,component:we})))};o.a.render(r.a.createElement(_t,null),document.getElementById("root"))}},[[122,1,2]]]);